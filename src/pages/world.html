<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Pixel Accelerator - Mundo Aberto</title>
  <link rel="stylesheet" href="../css/world.css">
</head>
<body>
  <main class="game-container">
    <!-- HUD superior -->
    <header class="top-bar">
      <div class="player-info">
        <img id="image_player" src="" alt="Miniatura do personagem">
        <span id="player_name">Player</span>
      </div>

      <div class="controls">
        <button id="restart">Reiniciar</button>
        <a href="../../index.html">Trocar personagem</a>

        <!-- Botão de volume -->
        <div class="volume-control">
          <input id="checkboxInput" type="checkbox" />
          <label class="toggleSwitch" for="checkboxInput">
            <div class="speaker">
              <svg viewBox="0 0 75 75" xmlns="http://www.w3.org/2000/svg">
                <path d="M39.389,13.769 L22.235,28.606 L6,28.606 L6,47.699 L21.989,47.699 L39.389,62.75 L39.389,13.769z"/>
                <path d="M48,27.6a19.5,19.5 0 0 1 0,21.4M55.1,20.5a30,30 0 0 1 0,35.6M61.6,14a38.8,38.8 0 0 1 0,48.6"/>
              </svg>
            </div>
            <div class="mute-speaker">
              <svg viewBox="0 0 75 75" xmlns="http://www.w3.org/2000/svg">
                <path d="m39,14-17,15H6V48H22l17,15z"/>
                <path d="m49,26 20,24m0-24-20,24"/>
              </svg>
            </div>
          </label>
        </div>
      </div>
    </header>

    <!-- Canvas e área de código -->
<section class="main-section">
  <div class="game-area">
    <canvas id="gameCanvas" width="960" height="540"></canvas>
  </div>

  <div class="code-panel">
    <h2>Digite seu código:</h2>
    <textarea id="codeInput" placeholder="Ex: mover('direita')"></textarea>
    <button id="runButton">Executar</button>
    <p id="feedback"></p>
  </div>
</section>


  <audio src="../audio/music.mp3" loop></audio>

  <!-- Biblioteca GSAP -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.9.1/gsap.min.js"
    integrity="sha512-H6cPm97FAsgIKmlBA4s774vqoN24V5gSQL4yBTDOY2su2DeXZVhQPxFK4P6GPdnZqM9fg1G3cMv5wD7e6cFLZQ=="
    crossorigin="anonymous" referrerpolicy="no-referrer"></script>

  <!-- Seus arquivos JS -->
  <script src="../js/characterSettings.js"></script>
  <script src="../js/utils.js"></script>
  <script src="../js/classes.js"></script>
  <script src="../js/game.js"></script>
  <script src="../js/world.js"></script>

  <!-- Script de inicialização -->
  <script>
    // Carregar personagem
    let playerOne = localStorage.getItem('PlayerOne') || 'knight';
    const playerImg = document.querySelector('#image_player');
    const playerName = document.querySelector('#player_name');
    playerImg.src = `../imagens/${playerOne}.png`;
    playerName.textContent = playerOne;

    // Reiniciar jogo
    document.querySelector('#restart').addEventListener('click', () => {
      window.location.reload();
    });

    // Controle de volume
    const checkbox = document.querySelector('#checkboxInput');
    const audio = document.querySelector('audio');

    checkbox.addEventListener('change', () => {
      if (checkbox.checked) {
        audio.volume = 0.2;
        audio.currentTime = 0;
        audio.play();
      } else {
        audio.pause();
      }
    });
  </script>
</body>
</html>
