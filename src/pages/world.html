<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Pixel Accelerator - Mundo Aberto</title>
  <link rel="stylesheet" href="../css/world.css">
</head>
<body>
  <main class="game-container">
    <!-- HUD superior -->
    <header class="top-bar">
      <div class="player-info">
        <img id="image_player" src="" alt="Miniatura do personagem">
        <span id="player_name">Player</span>
      </div>

      <div class="controls">
        <button id="restart">Reiniciar</button>
        <a href="../../index.html">Trocar personagem</a>
        <img src="../svg/muted.svg" id="volume" alt="volume">
      </div>
    </header>

    <!-- Canvas e √°rea de c√≥digo -->
    <section class="main-section">
      <canvas id="gameCanvas" width="800" height="480"></canvas>

      <div class="code-panel">
        <h2>Digite seu c√≥digo:</h2>
        <textarea id="codeInput" placeholder="Ex: mover('direita')"></textarea>
        <button id="runButton">Executar</button>
        <p id="feedback"></p>
      </div>
    </section>
  </main>

  <audio src="../audio/music.mp3" loop></audio>
  <script src="../js/world.js"></script>

  <!-- Biblioteca GSAP -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.9.1/gsap.min.js"
  integrity="sha512-H6cPm97FAsgIKmlBA4s774vqoN24V5gSQL4yBTDOY2su2DeXZVhQPxFK4P6GPdnZqM9fg1G3cMv5wD7e6cFLZQ=="
  crossorigin="anonymous" referrerpolicy="no-referrer"></script>

<!-- Seus arquivos JS -->
<script src="../js/characterSettings.js"></script>
<script src="../js/utils.js"></script>
<script src="../js/classes.js"></script>
<script src="../js/game.js"></script>

<!-- Script de inicializa√ß√£o -->
<script>
  // Reiniciar o jogo
  document.querySelector('#restart').addEventListener('click', () => {
    window.location.reload();
  });

  // Controle de volume
  const volume = document.querySelector('#volume');
  const audio = document.querySelector('audio');
  volume.addEventListener('click', () => {
    if (volume.src.includes('muted.svg')) {
      volume.src = '../volume.svg';
      audio.currentTime = 0;
      audio.volume = 0.1;
      audio.play();
    } else {
      volume.src = '../svg/muted.svg';
      audio.pause();
    }
  });
</script>


  <script>
    // üßç‚Äç‚ôÇÔ∏è Carregar personagem do localStorage
    let playerOne = localStorage.getItem('PlayerOne') || 'knight';
    const playerImg = document.querySelector('#image_player');
    const playerName = document.querySelector('#player_name');

    playerImg.src = `../imagens/${playerOne}.png`;
    playerName.textContent = playerOne;

    // üîÑ Reiniciar jogo
    document.querySelector('#restart').addEventListener('click', () => {
      window.location.reload();
    });
  </script>
</body>
</html>
