<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Code RPG - Game</title>
  <link rel="stylesheet" href="../css/desenvolvimento-do-jogo/estilo.css">
</head>
<body>
  <main class="l-main">
    <section class="l-main_buttons">
      <div>
        <button id="restart">Reiniciar</button>
        <a href="../../index.html">Trocar personagem</a>
      </div>
    </section>

    <section class="l-main__container">
      <article class="l-container right-side">
        <div class="c-container__healthBar-Player"></div>
        <div class="c-container__healthBar-bottom" id="playerHealth"></div>
      </article>

      <div class="c-container__timer" id="timer">60</div>
    </section>

    <div id="name_player">
      <p class="name-text-pl">
        <img id="image_player" src="" alt="Miniatura do personagem escolhido">
        <span id="player_name">Player</span>
      </p>
    </div>

    <div id="name_enemy">
      <p class="name-text-en">
        <img id="image_enemy" src="" alt="Miniatura do inimigo">
        <span id="enemy_name">Enemy</span>
      </p>
    </div>

    <canvas></canvas>
  </main>

  <img src="../svg/muted.svg" id="volume" alt="volume">
  <audio src="../audio/music.mp4" loop></audio>

  <!-- JS -->
  <script src="../js/characterSettings.js"></script>
  <script src="../js/utils.js"></script>
  <script src="../js/classes.js"></script>
  <script src="../js/game.js"></script>

  <script>
    // Carregar personagem escolhido
    let playerOne = localStorage.getItem('PlayerOne') || 'knight'; // default

    // Atualizar HUD
    const playerImg = document.querySelector('#image_player');
    const playerName = document.querySelector('#player_name');

    playerImg.src = `../imagens/${playerOne}.png`;
    playerName.textContent = playerOne;

    // Reiniciar jogo
    document.querySelector('#restart').addEventListener('click', () => {
      window.location.reload();
    });

    // Controle de volume
    let volume = document.querySelector('#volume');
    let audio = document.querySelector('audio');
    volume.addEventListener('click', () => {
      if (volume.src.includes('muted.svg')) {
        volume.src = '../svg/volume.svg';
        audio.currentTime = 0;
        audio.volume = 0.1;
        audio.play();
      } else {
        volume.src = '../svg/muted.svg';
        audio.pause();
      }
    });
  </script>
</body>
</html>
